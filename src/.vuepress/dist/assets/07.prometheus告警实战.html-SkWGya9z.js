const e=JSON.parse(`{"key":"v-579782fe","path":"/posts/k8s/2023/07.prometheus%E5%91%8A%E8%AD%A6%E5%AE%9E%E6%88%98.html","title":"prometheus告警实战","lang":"zh-CN","frontmatter":{"title":"prometheus告警实战","author":"falser101","date":"2023-12-22T00:00:00.000Z","category":["k8s"],"tag":["监控告警"],"star":true,"description":"配置 alertmanager配置 global: resolve_timeout: 5m # 设置解决（resolve）告警的超时时间为5分钟。 route: group_by: ['alertname'] # 告警按照 alertname 分组。 group_wait: 10s # 每个分组等待10秒，以便将相关的告警聚合在一起。 group_interval: 10s # 每个分组之间的间隔时间为10秒。 repeat_interval: 1h # 告警的重复间隔时间为1小时。 receiver: 'webhook' # 默认的接收器是 'webhook'。 routes: - match: cluster: 'tlq-cn' # 满足条件的使用这个接收器 receiver: 'webhook' receivers: # 定义接收器 - name: 'webhook' webhook_configs: - url: 'http://127.0.0.1:5001/' inhibit_rules: # 定义抑制规则，用于在某些条件下抑制告警 - source_match: severity: 'critical' # 如果源告警的严重性为 'critical'。 target_match: severity: 'warning' # 如果目标告警的严重性为 'warning' equal: ['alertname', 'dev', 'instance'] # 源告警和目标告警必须在这些标签上相等才会触发抑制。","head":[["meta",{"property":"og:url","content":"https://falser101.github.io/falser/posts/k8s/2023/07.prometheus%E5%91%8A%E8%AD%A6%E5%AE%9E%E6%88%98.html"}],["meta",{"property":"og:site_name","content":"飞哥与小佛"}],["meta",{"property":"og:title","content":"prometheus告警实战"}],["meta",{"property":"og:description","content":"配置 alertmanager配置 global: resolve_timeout: 5m # 设置解决（resolve）告警的超时时间为5分钟。 route: group_by: ['alertname'] # 告警按照 alertname 分组。 group_wait: 10s # 每个分组等待10秒，以便将相关的告警聚合在一起。 group_interval: 10s # 每个分组之间的间隔时间为10秒。 repeat_interval: 1h # 告警的重复间隔时间为1小时。 receiver: 'webhook' # 默认的接收器是 'webhook'。 routes: - match: cluster: 'tlq-cn' # 满足条件的使用这个接收器 receiver: 'webhook' receivers: # 定义接收器 - name: 'webhook' webhook_configs: - url: 'http://127.0.0.1:5001/' inhibit_rules: # 定义抑制规则，用于在某些条件下抑制告警 - source_match: severity: 'critical' # 如果源告警的严重性为 'critical'。 target_match: severity: 'warning' # 如果目标告警的严重性为 'warning' equal: ['alertname', 'dev', 'instance'] # 源告警和目标告警必须在这些标签上相等才会触发抑制。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-01-11T08:33:54.000Z"}],["meta",{"property":"article:author","content":"falser101"}],["meta",{"property":"article:tag","content":"监控告警"}],["meta",{"property":"article:published_time","content":"2023-12-22T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-01-11T08:33:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"prometheus告警实战\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-12-22T00:00:00.000Z\\",\\"dateModified\\":\\"2024-01-11T08:33:54.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"falser101\\"}]}"]]},"headers":[{"level":2,"title":"配置","slug":"配置","link":"#配置","children":[{"level":3,"title":"alertmanager配置","slug":"alertmanager配置","link":"#alertmanager配置","children":[]},{"level":3,"title":"Prometheus配置","slug":"prometheus配置","link":"#prometheus配置","children":[]},{"level":3,"title":"告警规则","slug":"告警规则","link":"#告警规则","children":[]}]},{"level":2,"title":"启动服务","slug":"启动服务","link":"#启动服务","children":[{"level":3,"title":"启动 Prometheus","slug":"启动-prometheus","link":"#启动-prometheus","children":[]},{"level":3,"title":"启动 Alertmanager","slug":"启动-alertmanager","link":"#启动-alertmanager","children":[]}]},{"level":2,"title":"查看Prometheus","slug":"查看prometheus","link":"#查看prometheus","children":[{"level":3,"title":"状态值","slug":"状态值","link":"#状态值","children":[]},{"level":3,"title":"热加载","slug":"热加载","link":"#热加载","children":[]}]},{"level":2,"title":"查看Alertmanager","slug":"查看alertmanager","link":"#查看alertmanager","children":[]}],"git":{"createdTime":1703482414000,"updatedTime":1704962034000,"contributors":[{"name":"T2816","email":"zhangjf@tongtech.com","commits":2}]},"readingTime":{"minutes":3.81,"words":1144},"filePathRelative":"posts/k8s/2023/07.prometheus告警实战.md","localizedDate":"2023年12月22日","excerpt":"<h2> 配置</h2>\\n<h3> alertmanager配置</h3>\\n<div class=\\"language-yaml line-numbers-mode\\" data-ext=\\"yml\\"><pre class=\\"language-yaml\\"><code><span class=\\"token key atrule\\">global</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token key atrule\\">resolve_timeout</span><span class=\\"token punctuation\\">:</span> 5m <span class=\\"token comment\\"># 设置解决（resolve）告警的超时时间为5分钟。</span>\\n<span class=\\"token key atrule\\">route</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token key atrule\\">group_by</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">'alertname'</span><span class=\\"token punctuation\\">]</span> <span class=\\"token comment\\"># 告警按照 alertname 分组。</span>\\n  <span class=\\"token key atrule\\">group_wait</span><span class=\\"token punctuation\\">:</span> 10s <span class=\\"token comment\\"># 每个分组等待10秒，以便将相关的告警聚合在一起。</span>\\n  <span class=\\"token key atrule\\">group_interval</span><span class=\\"token punctuation\\">:</span> 10s <span class=\\"token comment\\"># 每个分组之间的间隔时间为10秒。</span>\\n  <span class=\\"token key atrule\\">repeat_interval</span><span class=\\"token punctuation\\">:</span> 1h <span class=\\"token comment\\"># 告警的重复间隔时间为1小时。</span>\\n  <span class=\\"token key atrule\\">receiver</span><span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">'webhook'</span> <span class=\\"token comment\\"># 默认的接收器是 'webhook'。</span>\\n  <span class=\\"token key atrule\\">routes</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">match</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">cluster</span><span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">'tlq-cn'</span> <span class=\\"token comment\\"># 满足条件的使用这个接收器</span>\\n    <span class=\\"token key atrule\\">receiver</span><span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">'webhook'</span>\\n<span class=\\"token key atrule\\">receivers</span><span class=\\"token punctuation\\">:</span> <span class=\\"token comment\\"># 定义接收器</span>\\n<span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">'webhook'</span>\\n  <span class=\\"token key atrule\\">webhook_configs</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">url</span><span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">'http://127.0.0.1:5001/'</span>\\n<span class=\\"token key atrule\\">inhibit_rules</span><span class=\\"token punctuation\\">:</span> <span class=\\"token comment\\"># 定义抑制规则，用于在某些条件下抑制告警</span>\\n  <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">source_match</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">severity</span><span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">'critical'</span> <span class=\\"token comment\\"># 如果源告警的严重性为 'critical'。</span>\\n    <span class=\\"token key atrule\\">target_match</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">severity</span><span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">'warning'</span> <span class=\\"token comment\\"># 如果目标告警的严重性为 'warning'</span>\\n    <span class=\\"token key atrule\\">equal</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span><span class=\\"token string\\">'alertname'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">'dev'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">'instance'</span><span class=\\"token punctuation\\">]</span> <span class=\\"token comment\\"># 源告警和目标告警必须在这些标签上相等才会触发抑制。</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{e as data};
